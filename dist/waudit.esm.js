import{filter as e}from"lodash";import{from as t}from"rxjs";class r{static getListeners(t,n){return e(r.eventPool,n?{eventName:t,flag:n}:{eventName:t})}static on(e,t,n="default"){return r.eventPool.push({id:r.eventPool.length,eventName:e,handler:t,flag:n}),{id:r.eventPool.length-1,eventName:e,handler:t,flag:n}}static off(e,t){delete r.eventPool[t]}static clearAll(){r.eventPool=[]}static dispatch(e,n){t(r.getListeners(e)).subscribe(e=>{try{e.handler.apply(e,[n])}catch(t){this.onErrorCallback(e,n,t)}})}static onError(e){this.onErrorCallback=e}}r.eventPool=[],r.onErrorCallback=function(){};class n{constructor({flag:e="default"}){this.flag="",this.flag=e}onPageView(e){return r.on("page-view",e,this.flag)}onIndexView(e){return r.on("index-view",e,this.flag)}onChangeProfile(e){return r.on("change-profile",e,this.flag)}onKeywordSearch(e){return r.on("keyword-search",e,this.flag)}onCategoryView(e){return r.on("category-view",e,this.flag)}onProductView(e){return r.on("product-view",e,this.flag)}onAddToCart(e){return r.on("add-to-cart",e,this.flag)}onCartView(e){return r.on("cart-view",e,this.flag)}onCheckoutFinish(e){return r.on("checkout-finish",e,this.flag)}getEventListener(){return r}}export{r as EventListener,n as ListenerCreator};
